<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ITパスポート 無料テキスト｜公式LINEで受け取る</title>
  <meta name="description" content="公式LINEに追加で『ITパスポート最短合格マニュアル（無料テキスト）』をプレゼント。未経験向け・短期合格サポート。">
  <link rel="stylesheet" href="./css/styles.css">
  <style>
    :root{--bg:#fff;--accent:#00c300;--muted:#666;--card:#f8f8f8;--maxw:720px}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Hiragino Kaku Gothic ProN",Meiryo,Arial; background:var(--bg); color:#111; -webkit-font-smoothing:antialiased}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:18px}
    header{display:flex;align-items:center;justify-content:space-between;padding:8px 0}
    .logo{font-weight:700;font-size:1.05rem}
    .hero{padding:18px;background:linear-gradient(180deg,#fff 0,#fbfffb 100%);border-radius:12px;margin-top:8px}
    .eyebrow{font-size:.85rem;color:var(--muted);margin-bottom:6px}
    .title{font-size:1.5rem;margin:6px 0 8px}
    .lead{color:var(--muted);line-height:1.5;margin-bottom:14px}
    .thumbnail{width:100%;max-height:220px;object-fit:cover;border-radius:8px;margin-bottom:12px}
    .cta-group{display:flex;gap:8px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 14px;border-radius:10px;border:none;color:#fff;background:var(--accent);cursor:pointer;text-decoration:none;font-weight:700}
    .btn.ghost{background:transparent;color:var(--accent);border:2px solid var(--accent)}
    .features{display:grid;gap:10px;margin:16px 0}
    .card{background:var(--card);padding:12px;border-radius:10px}
    .small{font-size:.9rem;color:var(--muted)}
    .steps{display:flex;gap:8px;overflow:auto;padding-bottom:6px}
    .step{min-width:160px;background:#fff;border-radius:10px;padding:10px;border:1px solid #eee}
    .footer{padding:18px 0;color:var(--muted);font-size:.9rem}
    .sticky-cta{position:fixed;left:50%;transform:translateX(-50%);bottom:14px;width:min(720px,94%);display:flex;gap:8px;z-index:1100}
    .sticky-cta .btn{flex:1}
    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;padding:18px;z-index:1200}
    .modal{background:#fff;padding:14px;border-radius:12px;max-width:420px;width:100%}
    .qr{width:100%;height:auto;border-radius:8px;margin:8px 0}
    .close{background:transparent;border:none;font-size:1.2rem;cursor:pointer}
    /* inview */
    .will-inview{opacity:0;transform:translateY(10px);transition:opacity .6s ease,transform .6s ease}
    .inview{opacity:1;transform:none}
    @media(min-width:720px){
      .title{font-size:2rem}
      .hero{display:flex;gap:14px;align-items:center}
      .hero .col{flex:1}
      .thumbnail{max-width:320px;height:200px}
      .sticky-cta{display:none}
    }

    /* 追加: モバイルでヘッダーを非表示にしてファーストビューを広げる */
    @media (max-width:720px) {
      header { display: none !important; }
      /* ヘッダーを消した分、必要ならトップ余白を調整（現在は不要なら削除） */
      .wrap { padding-top: 12px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">株式会社 Systemy</div>
      <a class="small" href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer">Instagram</a>
    </header>

    <main>
      <section class="hero will-inview" id="hero">
        <div class="col">
          <div class="eyebrow">公式LINE追加で無料テキストをプレゼント</div>
          <h1 class="title">未経験から合格へ。ITパスポート最短合格マニュアル</h1>
          <p class="lead">仕事や家事で忙しい方でも、2〜3ヶ月で合格できる学習の進め方・頻出用語をまとめた完全無料のテキストを公式LINEで配布中。</p>

          <div class="cta-group">
            <button class="btn" id="btn-line">公式LINEに追加して受け取る</button>
            <a class="btn ghost" id="btn-download" href="./pdfs/ITpassport_freetext.pdf" download>今すぐPDFをダウンロード</a>
          </div>
        </div>

        <img class="thumbnail" src="./images/ITpassport_freetext_thumbnail.jpg" alt="ITパスポート 無料テキスト 表紙" loading="lazy">
      </section>

      <section class="features will-inview" id="features">
        <div class="card">
          <strong>あなたに合った学習法</strong>
          <div class="small">短時間で効率よく覚えるコツ・頻出ワードの解説を収録</div>
        </div>
        <div class="card">
          <strong>実践的な問題対策</strong>
          <div class="small">実際の試験に近い練習問題と解説つき</div>
        </div>
        <div class="card">
          <strong>サポート情報</strong>
          <div class="small">LINE追加者限定のお知らせや勉強会の案内あり</div>
        </div>
      </section>

      <section class="will-inview" id="how">
        <h2>受け取りまでの流れ</h2>
        <div class="steps">
          <div class="step">
            <strong>1</strong>
            <div class="small">「公式LINEに追加」ボタンを押す</div>
          </div>
          <div class="step">
            <strong>2</strong>
            <div class="small">トークで「無料テキスト希望」と送信</div>
          </div>
          <div class="step">
            <strong>3</strong>
            <div class="small">PDFダウンロードリンクを受け取る</div>
          </div>
        </div>
      </section>

      <section class="will-inview" id="faq">
        <h2>よくある質問</h2>
        <div class="card">
          <strong>Q. 本当に無料ですか？</strong>
          <div class="small">A. はい。公式LINEに追加すると無料で受け取れます。</div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div>©2025 Teruya Hirahara — 株式会社 Systemy</div>
    </footer>
  </div>

  <!-- Sticky CTA（モバイル） -->
  <div class="sticky-cta">
    <button class="btn" id="sticky-line">公式LINEに追加して受け取る</button>
    <a class="btn ghost" href="./ITpassport_freetext.pdf" download>PDFを受け取る</a>
  </div>

  <!-- LINE モーダル（PC 用 QR 表示） -->
  <div id="modal" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>公式LINE 追加</strong>
        <button class="close" id="modal-close" aria-label="閉じる">✕</button>
      </div>
      <p class="small">スマホでボタンを押すとLINEアプリが開きます。PCの方はQRコードを読み取って追加してください。</p>
      <img class="qr" src="./images/line_qr.png" alt="公式LINE QRコード" loading="lazy">
      <div style="display:flex;gap:8px">
        <a id="modal-line-open" class="btn" href="#" rel="noopener noreferrer">LINEを開く</a>
        <button id="copy-link" class="btn ghost">LINEリンクをコピー</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const LINE_LINK = "https://line.me/R/ti/p/%40yourlineid"; // <-- 実際のLINEリンクに差し替えてください
      const btnLine = document.getElementById('btn-line');
      const stickyLine = document.getElementById('sticky-line');
      const modal = document.getElementById('modal');
      const modalClose = document.getElementById('modal-close');
      const modalLineOpen = document.getElementById('modal-line-open');
      const copyBtn = document.getElementById('copy-link');
      const downloadBtn = document.getElementById('btn-download');

      function isMobile(){
        return /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
      }

      function openLineDirect(){
        // スマホなら直接LINEリンクへ。ブラウザがブロックしないよう、ユーザー操作時に遷移する。
        window.location.href = LINE_LINK;
      }

      function openModal(){
        modal.style.display = 'flex';
        modal.setAttribute('aria-hidden','false');
      }
      function closeModal(){
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden','true');
      }

      // ボタン挙動：スマホは直接開く / PC はモーダルでQR表示
      [btnLine, stickyLine].forEach(b => {
        b && b.addEventListener('click', (e) => {
          if (isMobile()) {
            openLineDirect();
          } else {
            openModal();
          }
        });
      });

      modalClose.addEventListener('click', closeModal);
      modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

      modalLineOpen.addEventListener('click', (e) => {
        modalLineOpen.href = LINE_LINK;
        // 新しいタブで開く（ユーザージェスチャ内）
        window.open(LINE_LINK, '_blank');
      });

      copyBtn.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(LINE_LINK);
          copyBtn.textContent = 'コピーしました';
          setTimeout(()=> copyBtn.textContent = 'LINEリンクをコピー', 2000);
        } catch (err) {
          copyBtn.textContent = 'コピーに失敗';
        }
      });

      // ダウンロード計測（localStorageで簡易トラッキング）
      downloadBtn.addEventListener('click', () => {
        try { localStorage.setItem('lp_free_text_downloaded','1'); } catch(e){}
      });

      // IntersectionObserver でフェードイン
      const io = new IntersectionObserver(entries => {
        entries.forEach(en => {
          if (en.isIntersecting) {
            en.target.classList.add('inview');
            io.unobserve(en.target);
          }
        });
      }, {threshold: 0.12});
      document.querySelectorAll('.will-inview').forEach(el => io.observe(el));

      // ESC でモーダル閉じる
      document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

      // テスト用：もしLINE追加済みフラグがあればCTAを軽く変更
      try {
        if (localStorage.getItem('lp_line_added') === '1') {
          btnLine.textContent = 'LINEに追加済み（感謝）';
          stickyLine.textContent = '追加済み';
        }
      } catch(e){}
    })();
  </script>
</body>
</html>